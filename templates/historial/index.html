{% extends 'base.html' %}
{% block title %}Historial de Servicios{% endblock %}
{% block content %}
<h2>Historial de Servicios</h2>
<a href="{{ url_for('historial.create') }}" class="btn btn-primary mb-3">Registrar Servicio</a>

<table id="tablaUsuarios" class="table table-striped table-hover align-middle text-center text-dark" style="width:100%">
<thead>
<tr>
<th>ID</th><th>Fecha</th><th>Cliente</th><th>Servicio</th><th>Empleado</th><th>Satisfacci√≥n</th><th>Estado</th><th>Acciones</th>
</tr>
</thead>
<tbody>
{% for r in registros %}
<tr>
<td>{{ r.id }}</td>
<td>{{ r.fecha.strftime('%Y-%m-%d') }}</td>
<td>{{ r.cliente.nombre }}</td>
<td>{{ r.servicio.nombre }}</td>
<td>{{ r.empleado.nombre if r.empleado else 'Sin asignar' }}</td>
<td>{{ r.satisfaccion }}</td>
<td>{{ r.estado }}</td>
<td>
  {% if session.get('usuario_rol') == 'admin' %}
    <a href="{{ url_for('historial.edit', id=r.id) }}" class="btn btn-warning btn-sm">Editar</a>
    <a href="{{ url_for('historial.delete', id=r.id) }}" class="btn btn-danger btn-sm">Eliminar</a>
  {% endif %}
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
{% block extra_js %}
<script src="/static/js/usuarios_datatable.js"></script>
{% endblock %}